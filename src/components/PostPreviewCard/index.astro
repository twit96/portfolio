---
import ImageLink from './components/ImageLink.astro';
import PostTags from '@components/PostTags.astro';
import TitleLink from './components/TitleLink.astro';
import PostDates from './components/PostDates.astro';

const { post, cardType='compact' } = Astro.props;
---
{
  post && cardType &&
  <article class={`card ${cardType==="minimal" ? "surface1" : "surface3"}`}
  >

    {
      cardType!=="minimal" &&
      <ImageLink
        image={post.data.heroImage}
        title={post.data.title}
        href={`/${post.data.category}/${post.slug}`}
      />
      <PostTags 
        tags={post.data.tags}
        noWrap={true} 
      />
    }

    <TitleLink
      title={post.data.title}
      href={`/${post.data.category}/${post.slug}`}
    />

    <div class="preview-card-footer">
      { post.data.blurb && <em>{post.data.blurb}</em> }
      <PostDates
        datePublished={post.data.datePublished}
        dateUpdated={post.data.dateUpdated}
      />
    <div>

  </article>
}

<style>
  article {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    height: 100%;
  }

  .preview-card-footer {
    margin-top: auto;
    line-height: 1.3em;
    display: grid;
  }
</style>